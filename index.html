<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>优供达</title>

<style>
body{margin:0;font-family:-apple-system;background:#f2f2f2;}
.header{background:#07C160;color:#fff;text-align:center;padding:14px;font-size:18px;}
.container{padding:12px;padding-bottom:80px;}
.card{background:#fff;padding:12px;border-radius:12px;margin-bottom:12px;}
input,button{padding:8px;border-radius:8px;border:1px solid #ddd;margin:4px 0;font-size:14px;}
button{background:#07C160;color:#fff;border:none;}
button.danger{background:#ff3b30;}
.nav{
position:fixed;bottom:0;left:0;right:0;
background:#fff;border-top:1px solid #ddd;
display:flex;justify-content:space-around;padding:8px 0;
}
.nav button{
background:none;color:#333;font-size:14px;
}
.nav button.active{color:#07C160;font-weight:bold;}
.vip{color:#ff9900;font-size:12px;}
.ad{color:red;font-size:12px;}
.small{font-size:12px;color:#666;}
.hidden{display:none;}
</style>
</head>

<body>

<div class="header">优供达</div>

<div class="container">

<!-- 首页 -->
<div id="homePage">
<div id="list"></div>
</div>

<!-- 发布页 -->
<div id="publishPage" class="hidden">
<div class="card">
<h3>发布商品</h3>
<input id="name" placeholder="商品名称"><br>
<input id="price" type="number" placeholder="价格"><br>
<label><input type="checkbox" id="viponly"> 仅VIP可见</label><br>
<button onclick="publish()">发布</button>
</div>
</div>

<!-- 推广页 -->
<div id="adPage" class="hidden">
<div class="card">
<h3>推广商品</h3>
<p class="small">推广后会排在最前面（模拟）</p>
<div id="adList"></div>
</div>
</div>

<!-- 我的 -->
<div id="mePage" class="hidden">
<div class="card">
<h3>个人中心</h3>
<p id="vipstatus">普通用户</p>
<button onclick="openVIP()">开通VIP（模拟）</button>
<button class="danger" onclick="clearData()">清空数据</button>
</div>

<div class="card">
<h3>关于我们</h3>
<p class="small">
优供达是一个本地商品信息展示平台。<br>
本版本为在线测试版本。
</p>
</div>
</div>

</div>

<!-- 底部导航 -->
<div class="nav">
<button id="navHome" class="active" onclick="switchPage('home')">首页</button>
<button onclick="switchPage('publish')">发布</button>
<button onclick="switchPage('ad')">推广</button>
<button onclick="switchPage('me')">我的</button>
</div>

<script>

let products = JSON.parse(localStorage.getItem("ugd_data")) || [
{ id:1, name:"柠檬果汁", price:10, vip:false, ad:false },
{ id:2, name:"精品礼盒", price:199, vip:true, ad:false }
];

let isVIP=false;

function save(){
localStorage.setItem("ugd_data",JSON.stringify(products));
render();
}

function render(){
let html="";
products.sort((a,b)=>b.ad-a.ad||a.price-b.price);
products.forEach(p=>{
if(p.vip&&!isVIP) return;
html+=`<div class="card">
<b>${p.name}</b> ¥${p.price}
${p.vip?'<span class="vip"> VIP专属</span>':''}
${p.ad?'<span class="ad">  推广</span>':''}
<br>
<button onclick="contact(${p.id})">联系</button>
<button onclick="removeItem(${p.id})" class="danger">删除</button>
</div>`;
});
document.getElementById("list").innerHTML=html;

let adHtml="";
products.forEach(p=>{
adHtml+=`<div class="card">
${p.name} ¥${p.price}
<button onclick="promote(${p.id})">设为推广</button>
</div>`;
});
document.getElementById("adList").innerHTML=adHtml;
}

function publish(){
let name=document.getElementById("name").value.trim();
let price=parseFloat(document.getElementById("price").value);
let vip=document.getElementById("viponly").checked;
if(!name||!price){alert("请填写完整");return;}
products.push({id:Date.now(),name,price,vip,ad:false});
save();
alert("发布成功");
}

function promote(id){
let p=products.find(x=>x.id===id);
p.ad=true;
save();
alert("已推广（模拟）");
}

function contact(id){
let p=products.find(x=>x.id===id);
alert("联系电话：13800008888\n商品："+p.name);
}

function removeItem(id){
products=products.filter(p=>p.id!==id);
save();
alert("已删除");
}

function openVIP(){
isVIP=true;
document.getElementById("vipstatus").innerText="VIP会员";
render();
alert("VIP已开通（模拟）");
}

function clearData(){
localStorage.removeItem("ugd_data");
location.reload();
}

function switchPage(page){
document.getElementById("homePage").classList.add("hidden");
document.getElementById("publishPage").classList.add("hidden");
document.getElementById("adPage").classList.add("hidden");
document.getElementById("mePage").classList.add("hidden");

document.querySelectorAll(".nav button").forEach(b=>b.classList.remove("active"));

if(page==="home"){
document.getElementById("homePage").classList.remove("hidden");
document.getElementById("navHome").classList.add("active");
}
if(page==="publish"){
document.getElementById("publishPage").classList.remove("hidden");
}
if(page==="ad"){
document.getElementById("adPage").classList.remove("hidden");
}
if(page==="me"){
document.getElementById("mePage").classList.remove("hidden");
}
}

render();

</script>

</body>
</html>
